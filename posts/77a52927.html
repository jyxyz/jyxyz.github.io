<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>《汇编语言-王爽-4th》实验代码 | 一杯热牛奶</title><meta name="keywords" content="asm"><meta name="author" content="阿耶"><meta name="copyright" content="阿耶"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="《汇编语言》王爽第四版，入门学习汇编不可多得的好书，知识屏蔽66的。文章为重要实验的个人代码（含注释），已在win10的VScode配合masm插件用DosBoxdebugger运行及调试过。">
<meta property="og:type" content="article">
<meta property="og:title" content="《汇编语言-王爽-4th》实验代码">
<meta property="og:url" content="https://jyxyz.github.io/posts/77a52927.html">
<meta property="og:site_name" content="一杯热牛奶">
<meta property="og:description" content="《汇编语言》王爽第四版，入门学习汇编不可多得的好书，知识屏蔽66的。文章为重要实验的个人代码（含注释），已在win10的VScode配合masm插件用DosBoxdebugger运行及调试过。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://jyxyz.github.io/img/default.jpg">
<meta property="article:published_time" content="2021-08-06T12:55:26.000Z">
<meta property="article:modified_time" content="2021-08-18T03:42:34.000Z">
<meta property="article:author" content="阿耶">
<meta property="article:tag" content="asm">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jyxyz.github.io/img/default.jpg"><link rel="shortcut icon" href="/img/portrait.png"><link rel="canonical" href="https://jyxyz.github.io/posts/77a52927"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":270},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":200,"languages":{"author":"作者: 阿耶","link":"链接: ","source":"来源: 一杯热牛奶","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#BEE5D3","bgDark":"#BEE5D3","position":"bottom-right"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '《汇编语言-王爽-4th》实验代码',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-08-18 11:42:34'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/copyright.css"  media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/heoMainColor.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/poem.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.0.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/portrait.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">一杯热牛奶</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">《汇编语言-王爽-4th》实验代码</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-06T12:55:26.000Z" title="发表于 2021-08-06 20:55:26">2021-08-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-08-18T03:42:34.000Z" title="更新于 2021-08-18 11:42:34">2021-08-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Windows%E5%AE%89%E5%85%A8/">Windows安全</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Windows%E5%AE%89%E5%85%A8/%E5%9F%BA%E7%A1%80%E7%AF%87/">基础篇</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Windows%E5%AE%89%E5%85%A8/%E5%9F%BA%E7%A1%80%E7%AF%87/asm/">asm</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>32分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="《汇编语言-王爽-4th》实验代码"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/77a52927.html#post-comment"><span id="twikoo-count"></span></a></span></div></div></div><article class="post-content" id="article-container"><blockquote>
<p><a target="_blank" rel="noopener" href="https://highlightjs.org/static/demo/">highlight.js demo (highlightjs.org)</a></p>
<p>网页没把汇编代码高亮出来，疑是不支持16位的。后期再研究</p>
</blockquote>
<h2 id="P173实验7：Exp7-asm">P173实验7：Exp7.asm</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">data segment</span><br><span class="line">    db &#x27;1975&#x27;,&#x27;1976&#x27;,&#x27;1977&#x27;,&#x27;1978&#x27;,&#x27;1979&#x27;,&#x27;1980&#x27;,&#x27;1981&#x27;,&#x27;1982&#x27;,&#x27;1983&#x27;</span><br><span class="line">    db &#x27;1984&#x27;,&#x27;1985&#x27;,&#x27;1986&#x27;,&#x27;1987&#x27;,&#x27;1988&#x27;,&#x27;1989&#x27;,&#x27;1990&#x27;,&#x27;1991&#x27;,&#x27;1992&#x27;</span><br><span class="line">    db &#x27;1993&#x27;,&#x27;1994&#x27;,&#x27;1995&#x27;</span><br><span class="line">    ;以上是表示21年的21个字符串</span><br><span class="line">    ;84byte</span><br><span class="line"></span><br><span class="line">    dd 16,22,382,1356,2390,8000,16000,24486,50065,97479,140417,197514</span><br><span class="line">    dd 345980,590827,803530,1183000,1843000,2759000,3753000,4649000,5937000</span><br><span class="line">    ;以上是表示21年公司总收入的21个dword型数据，21×4=84byte</span><br><span class="line">    ;84byte</span><br><span class="line"></span><br><span class="line">    dw 3,7,9,13,28,130,220,476,778,1001,1442,2258,2793,4037,5635,8226</span><br><span class="line">    dw 11542,14430,15257,17800</span><br><span class="line">    ;以上是表示21年公司雇员人数的21个word数据，21×2byte=42byte</span><br><span class="line">    ;42byte</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">table segment</span><br><span class="line">    db 21 dup(&#x27;year summ ne ?? &#x27;)</span><br><span class="line">table ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">start:</span><br><span class="line">      mov ax,data</span><br><span class="line">      mov ds,ax                 ;ds指向data</span><br><span class="line">      mov bx,0                  ;ds:[bx+idata]用来指向data段中的年份和收入</span><br><span class="line">      mov si,84+84              ;ds:[si]用来指向data段中的雇员数</span><br><span class="line"></span><br><span class="line">      mov ax,table</span><br><span class="line">      mov es,ax                 ;es指向table</span><br><span class="line">      mov bp,0                  ;es:[bp+idata]</span><br><span class="line"></span><br><span class="line">      mov cx,21</span><br><span class="line">to_table:</span><br><span class="line">      mov ax,[si]               ;复制雇员数量+准备除数（放内存单元）</span><br><span class="line">      mov es:[bp+0ah],ax        ;除数也可以放寄存器，div reg，然后再把商放table里</span><br><span class="line"></span><br><span class="line">      mov ax,[bx]               ;复制年份</span><br><span class="line">      mov dx,[bx+2]             ;[bx+idata]方式寻址,[bx+0]||[bx+2]</span><br><span class="line">      mov es:[bp],ax</span><br><span class="line">      mov es:[bp+2],dx</span><br><span class="line"></span><br><span class="line">      mov ax,[bx+84]            ;复制收入+准备被除数</span><br><span class="line">      mov dx,[bx+84+2]          ;84是从年份数据跳到收入数据，要+84个byte</span><br><span class="line">      mov es:[bp+5h],ax</span><br><span class="line">      mov es:[bp+5h+2],dx</span><br><span class="line"></span><br><span class="line">      div word ptr es:[bp+0ah]  ;商在AX，即人均收入</span><br><span class="line">      mov es:[bp+0dh],ax        ;放人均收入</span><br><span class="line">      </span><br><span class="line">      add bx,4                  ;data中，年份or收入都是4byte，故bx递增量是4</span><br><span class="line">      add si,2                  ;data中公司雇员相邻word类型，即2byte</span><br><span class="line">      add bp,10h                ;table中下一行</span><br><span class="line"></span><br><span class="line">      loop to_table</span><br><span class="line"></span><br><span class="line">      mov ax,4c00h</span><br><span class="line">      int 21h</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="P187实验九：Exp9-asm">P187实验九：Exp9.asm</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code,ds:data</span><br><span class="line"></span><br><span class="line">data segment</span><br><span class="line">    db &#x27;welcome to masm!&#x27;       ;字符串长度是16b==10h</span><br><span class="line">    db 02h                      ;黑底绿字属性字节0 000 0 010</span><br><span class="line">    db 24h                      ;绿底红字属性字节0 010 0 100</span><br><span class="line">    db 71h                      ;白底蓝字属性字节0 111 0 001</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">start:mov ax,data</span><br><span class="line">      mov ds,ax                 ;初始化ds指向data段</span><br><span class="line">      mov si,0                  ;后面通过递增si，用[si]逐位指遍data中的字符</span><br><span class="line"></span><br><span class="line">      mov ax,0b872h             ;显示器的第0页起始地址B8000H+第12行起始偏移6EOH+33列起始偏移40H=B87200==b872:0000</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov di,0                  ;后面通过di+2，指向下一列（一个字符占两个字节的存储空间，即一个字，高位字节是字符属性，低位字节是字符的ASCII码）</span><br><span class="line">      </span><br><span class="line">      mov cx,10h                ;16个字符串</span><br><span class="line"></span><br><span class="line">    s:                          ;循环16次，逐列复制字符</span><br><span class="line">                                ;eg现在是第一列，复制w绿色黑底到12行-&gt;复制w绿底红色到13行-&gt;复制w白底蓝色到14行</span><br><span class="line">                                ;现在是第二列，复制e绿色黑底到12行-&gt;复制e绿底红色到13行-&gt;复制e白底蓝色到14行……</span><br><span class="line">      </span><br><span class="line">      mov al,[si]               ;将字符复制到al</span><br><span class="line"></span><br><span class="line">      ;第12行的复制</span><br><span class="line">      mov ah,ds:[10h]           ;设置黑底绿色属性字节，复制到ah</span><br><span class="line">      mov es:[di],ax            ;复制到显示器缓冲区，（高位是字节属性，低位是字符ASCII码）</span><br><span class="line"></span><br><span class="line">      ;第13行的复制</span><br><span class="line">      mov ah,ds:[11h]           ;设置绿底红字属性字节</span><br><span class="line">      mov es:0a0h[di],ax        ;同一列，但是是13行</span><br><span class="line"></span><br><span class="line">      ;第14行的复制</span><br><span class="line">      mov ah,ds:[12h]           ;设置白底蓝字属性字节</span><br><span class="line">      mov es:140h[di],ax        ;同一列，但是是14行，两个160相加为140h</span><br><span class="line"></span><br><span class="line">      inc si                    ;si指向源头data中的下一个字符</span><br><span class="line">      add di,2                  ;di指向目的地的下一列</span><br><span class="line"></span><br><span class="line">      loop s</span><br><span class="line">      </span><br><span class="line">      mov ax,4c00h</span><br><span class="line">      int 21h</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="P206实验十">P206实验十</h2>
<h3 id="1-显示字符串Exp10-1-asm">1.显示字符串Exp10_1.asm</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">data segment</span><br><span class="line">    db &#x27;Welcome to masm!&#x27;,0</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">start:mov dh,8      ;行号</span><br><span class="line">      mov dl,3      ;列号</span><br><span class="line">      mov cl,2      ;颜色</span><br><span class="line">      </span><br><span class="line">      mov ax,data</span><br><span class="line">      mov ds,ax</span><br><span class="line">      mov si,0      ;ds:[si]指向字符串</span><br><span class="line"></span><br><span class="line">      call show_str</span><br><span class="line"></span><br><span class="line">      mov ax,4c00h</span><br><span class="line">      int 21h</span><br><span class="line">show_str: </span><br><span class="line">      push ax           ;只压子程序中用到的寄存器</span><br><span class="line">      push cx           ;没必要那么虎，全压了</span><br><span class="line">      push dx</span><br><span class="line">      push si</span><br><span class="line"></span><br><span class="line">      mov ax,0b800h     ;段地址</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov bx,0          ;用来放行和列偏移地址</span><br><span class="line">      mov di,0          ;指向显示器缓冲区下一字</span><br><span class="line"></span><br><span class="line">      ;算行偏移地址</span><br><span class="line">      xor ah,ah         ;ax高位清0</span><br><span class="line">      mov al,160        ;0a0h，160乘以行号，算行偏移地址</span><br><span class="line">      mul dh            ;行偏移地址结果在ax中</span><br><span class="line">      </span><br><span class="line">      mov bx,ax         ;结果送给bx</span><br><span class="line"></span><br><span class="line">      ;算列偏移地址</span><br><span class="line">      xor ah,ah         ;或者mov dh,0 然后add bx,dx来两句</span><br><span class="line">      mov al,2</span><br><span class="line">      mul dl            ;列偏移地址结果在ax中</span><br><span class="line">      </span><br><span class="line">      add bx,ax         ;现在bx是行+列偏移地址的和</span><br><span class="line">      </span><br><span class="line">      mov al,cl         ;下边要用cx来拷贝与判断，cl应放字符ASCII码，高位是字节属性</span><br><span class="line">      mov cl,0          ;而题目要求子程序参数（cl）=颜色，这里用al保存一下</span><br><span class="line">    s:</span><br><span class="line">      mov cl,ds:[si]    ;取字符串中的字符到cl中</span><br><span class="line">      mov ch,0          ;把高位字节属性清0.那么如果取的字符是0，jcxz就跳转退出子程序</span><br><span class="line">      jcxz ok           ;用到前面学的cx==0就退出子程序</span><br><span class="line">      mov ch,al         ;把字符属性弄回来</span><br><span class="line">                        ;法二，就直接把字拷贝到显示器缓冲区，拷贝完后边在单独写字节属性到缓冲区</span><br><span class="line"></span><br><span class="line">      mov es:[bx+di],cx ;拷贝</span><br><span class="line"></span><br><span class="line">      inc si            ;下一个字符拿来吧你！</span><br><span class="line">      add di,2          ;显示器缓冲区下一列（一个字）</span><br><span class="line"></span><br><span class="line">      jmp short s</span><br><span class="line">    ok:</span><br><span class="line">      pop si            ;ret前弹栈，与入栈顺序相反</span><br><span class="line">      pop dx</span><br><span class="line">      pop cx</span><br><span class="line">      pop ax</span><br><span class="line">      ret</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h3 id="2-解决除法溢出的问题Exp10-2-asm">2.解决除法溢出的问题Exp10_2.asm</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code,ss:stack</span><br><span class="line"></span><br><span class="line">stack segment</span><br><span class="line">      db 16 dup(0)</span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">start:</span><br><span class="line">      mov ax,stack</span><br><span class="line">      mov ss,ax</span><br><span class="line">      mov sp,16         ;初始化堆栈段ss和sp</span><br><span class="line"></span><br><span class="line">      mov ax,4240h      ;被除数低16位</span><br><span class="line">      mov dx,000fh      ;被除数高16位</span><br><span class="line">      mov cx,0ah        ;除数，16位</span><br><span class="line">      call divdw</span><br><span class="line"></span><br><span class="line">      mov ax,4c00h</span><br><span class="line">      int 21h</span><br><span class="line"></span><br><span class="line">      ;功能：进行不会产生溢出的除法运算，被除数为dword型(32位），除数为word型（16位），结果为dword型（32位）</span><br><span class="line">      </span><br><span class="line">      ;参数  被除数 dx||ax  除数 cx</span><br><span class="line">      ;(ax)=dword型数据的低16位，(dx)=dword型数据的高16位  (cx)=除数</span><br><span class="line"></span><br><span class="line">      ;返回参数  商：dx||ax   余数 cx</span><br><span class="line">      ;(dx)=商的高16位，(ax)=商的低16位  (cx)=余数</span><br><span class="line"></span><br><span class="line">divdw:</span><br><span class="line">      mov bx,ax       ;保存被除数低16位</span><br><span class="line">      ;作H/N  H:被除数高16位 N：除数</span><br><span class="line">      mov ax,dx       </span><br><span class="line">      xor dx,dx       ;被除数准备：dx||ax，dx清0，把传进来的被除数的高16位dx放到ax中</span><br><span class="line">      div cx          ;H/N结果的商在AX中，余数在DX中</span><br><span class="line"></span><br><span class="line">      push ax         ;保存int(H/N)，即被除数高16位/除数的商</span><br><span class="line">      </span><br><span class="line">      mov ax,bx       ;恢复ax为传进来时的值，被除数的低16位</span><br><span class="line">      div cx          ;DX||AX  div  cx，即rem(H/N)||L /除数N</span><br><span class="line">                      ;商在AX（出口参数商低16位已在此），余数在DX</span><br><span class="line">      </span><br><span class="line">      mov cx,dx       ;出口参数，cx是余数</span><br><span class="line">      pop dx          ;dx是商的高16位</span><br><span class="line"></span><br><span class="line">      ret</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="3-数值显示Exp10-3-asm">3.数值显示Exp10_3.asm</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">data segment</span><br><span class="line">    db 10 dup(0)</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">start:mov ax,12606      ;word型数据，16位</span><br><span class="line">      </span><br><span class="line">      mov bx,data</span><br><span class="line">      mov ds,bx</span><br><span class="line">      mov si,0          ;ds:[si]指向data</span><br><span class="line"></span><br><span class="line">      call dtoc</span><br><span class="line"></span><br><span class="line">      mov dh,8          ;行号</span><br><span class="line">      mov dl,3          ;列号</span><br><span class="line">      mov cl,2          ;颜色</span><br><span class="line">      call show_str</span><br><span class="line"></span><br><span class="line">      mov ax,4c00h</span><br><span class="line">      int 21h</span><br><span class="line">;======================================================================</span><br><span class="line">      ;功能：将word型数据转变为表示十进制数的字符串，字符串以0为结尾符  </span><br><span class="line">            ;data中都已经是0了，把相应ASCII码放进去即可，不画蛇添足末尾手动添&#x27;0&#x27;了</span><br><span class="line">      ;入口参数：(ax)=word型数据  ds:si指向字符串首地址</span><br><span class="line">      ;返回：无</span><br><span class="line">      ;***************</span><br><span class="line">      ;这个dtoc以余数为0进行判断，会有问题。12066这种带0的数字，只能输出66</span><br><span class="line">      ;以商为0的版本才对，虽然在循环外要单独处理最高位</span><br><span class="line">      ;详见Design_one.asm</span><br><span class="line">      ;***************</span><br><span class="line">dtoc:</span><br><span class="line">      push bx           ;参数保护</span><br><span class="line">      push cx</span><br><span class="line">      push dx</span><br><span class="line">      push si</span><br><span class="line"></span><br><span class="line">      mov bx,0</span><br><span class="line">                        ;参数准备:被除数dx||ax  除数cx</span><br><span class="line">      xor dx,dx         ;高16位为dx,清零，低位为ax</span><br><span class="line">dec_to_ascii:</span><br><span class="line">      mov cx,10         ;除数准备，10</span><br><span class="line">      call divdw        ;子程序调用完返回   商：dx||ax   余数 cx</span><br><span class="line">                        ;实际上只用到ax,商dx一直为0。因为word型数据最大2^16-1=65535,/10后6553，ax就够了</span><br><span class="line">      jcxz ready        ;商为0，则除完了;正常写法是除到商为0，但是我用商为0再/10，得余数0，就不用在循环外单独处理最高位</span><br><span class="line">      add cx,30h        ;余数+30h变ASCII码</span><br><span class="line">      push cx           ;先存着先得的是最低位；实际上只有cl有数值，只用到cl，ch为0</span><br><span class="line">      inc bx            ;记录压了多少次</span><br><span class="line">      jmp short dec_to_ascii</span><br><span class="line">ready:</span><br><span class="line">      mov cx,bx         ;给循环次数</span><br><span class="line">put_in_data:            ;放data段中</span><br><span class="line">      pop bx</span><br><span class="line">      mov [si],bl</span><br><span class="line">      inc si</span><br><span class="line">      loop put_in_data</span><br><span class="line"> </span><br><span class="line">      pop si            ;参数恢复</span><br><span class="line">      pop dx</span><br><span class="line">      pop cx</span><br><span class="line">      pop bx</span><br><span class="line">      ret</span><br><span class="line">;===========================================================================================</span><br><span class="line">      ;功能：进行不会产生溢出的除法运算，被除数为dword型(32位），除数为word型（16位），结果为dword型（32位）</span><br><span class="line">      ;参数  被除数 dx||ax  除数 cx</span><br><span class="line">      ;(ax)=dword型数据的低16位，(dx)=dword型数据的高16位  (cx)=除数</span><br><span class="line">      ;返回参数  商：dx||ax   余数 cx</span><br><span class="line">      ;(dx)=商的高16位，(ax)=商的低16位  (cx)=余数</span><br><span class="line">divdw:</span><br><span class="line">      push bx           ;参数保护</span><br><span class="line"></span><br><span class="line">      mov bx,ax         ;保存被除数低16位</span><br><span class="line">      ;作H/N  H:被除数高16位 N：除数</span><br><span class="line">      mov ax,dx       </span><br><span class="line">      xor dx,dx         ;被除数准备：dx||ax，dx清0，把传进来的被除数的高16位dx放到ax中</span><br><span class="line">      div cx            ;H/N结果的商在AX中，余数在DX中</span><br><span class="line"></span><br><span class="line">      push ax           ;保存int(H/N)，即被除数高16位/除数的商</span><br><span class="line">      </span><br><span class="line">      mov ax,bx         ;恢复ax为传进来时的值，被除数的低16位</span><br><span class="line">      div cx            ;DX||AX  div  cx，即rem(H/N)||L /除数N</span><br><span class="line">                        ;商在AX（出口参数商低16位已在此），余数在DX</span><br><span class="line">      </span><br><span class="line">      mov cx,dx         ;出口参数，cx是余数</span><br><span class="line">      pop dx            ;dx是商的高16位</span><br><span class="line"></span><br><span class="line">      pop bx            ;参数恢复</span><br><span class="line">      ret</span><br><span class="line">;===========================================================================================</span><br><span class="line">      ;功能：在指定的位置，用指定的颜色，显示一个用0结束的字符串</span><br><span class="line">      ;入口参数  (dh)=行号 (dl)=列号 (cl)=颜色 ds:si指向字符串首地址</span><br><span class="line">      ;返回：无</span><br><span class="line">show_str: </span><br><span class="line">      push ax           ;只压子程序中用到的寄存器</span><br><span class="line">      push cx           ;没必要那么虎，全压了</span><br><span class="line">      push dx</span><br><span class="line">      push si</span><br><span class="line"></span><br><span class="line">      mov ax,0b800h     ;段地址</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov bx,0          ;用来放行和列偏移地址</span><br><span class="line">      mov di,0          ;指向显示器缓冲区下一字</span><br><span class="line"></span><br><span class="line">      ;算行偏移地址</span><br><span class="line">      xor ah,ah         ;ax高位清0</span><br><span class="line">      mov al,160        ;0a0h，160乘以行号，算行偏移地址</span><br><span class="line">      mul dh            ;行偏移地址结果在ax中</span><br><span class="line">      </span><br><span class="line">      mov bx,ax         ;结果送给bx</span><br><span class="line"></span><br><span class="line">      ;算列偏移地址</span><br><span class="line">      xor ah,ah         ;或者mov dh,0 然后add bx,dx来两句</span><br><span class="line">      mov al,2</span><br><span class="line">      mul dl            ;列偏移地址结果在ax中</span><br><span class="line">      </span><br><span class="line">      add bx,ax         ;现在bx是行+列偏移地址的和</span><br><span class="line">      </span><br><span class="line">      mov al,cl         ;下边要用cx来拷贝与判断，cl应放字符ASCII码，高位是字节属性</span><br><span class="line">      mov cl,0          ;而题目要求子程序参数（cl）=颜色，这里用al保存一下</span><br><span class="line">    s:</span><br><span class="line">      mov cl,ds:[si]    ;取字符串中的字符到cl中</span><br><span class="line">      mov ch,0          ;把高位字节属性清0.那么如果取的字符是0，jcxz就跳转退出子程序</span><br><span class="line">      jcxz ok           ;用到前面学的cx==0就退出子程序</span><br><span class="line">      mov ch,al         ;把字符属性弄回来</span><br><span class="line">                        ;法二，就直接把字拷贝到显示器缓冲区，拷贝完后边在单独写字节属性到缓冲区</span><br><span class="line"></span><br><span class="line">      mov es:[bx+di],cx ;拷贝</span><br><span class="line"></span><br><span class="line">      inc si            ;下一个字符拿来吧你！</span><br><span class="line">      add di,2          ;显示器缓冲区下一列（一个字）</span><br><span class="line"></span><br><span class="line">      jmp short s</span><br><span class="line">    ok:</span><br><span class="line">      pop si            ;ret前弹栈，与入栈顺序相反</span><br><span class="line">      pop dx</span><br><span class="line">      pop cx</span><br><span class="line">      pop ax</span><br><span class="line">      ret</span><br><span class="line">;==========================================================================================</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="P211课程设计1Design-one-asm">P211课程设计1Design_one.asm</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">data segment</span><br><span class="line">    db &#x27;1975&#x27;,&#x27;1976&#x27;,&#x27;1977&#x27;,&#x27;1978&#x27;,&#x27;1979&#x27;,&#x27;1980&#x27;,&#x27;1981&#x27;,&#x27;1982&#x27;,&#x27;1983&#x27;</span><br><span class="line">    db &#x27;1984&#x27;,&#x27;1985&#x27;,&#x27;1986&#x27;,&#x27;1987&#x27;,&#x27;1988&#x27;,&#x27;1989&#x27;,&#x27;1990&#x27;,&#x27;1991&#x27;,&#x27;1992&#x27;</span><br><span class="line">    db &#x27;1993&#x27;,&#x27;1994&#x27;,&#x27;1995&#x27;</span><br><span class="line">    ;以上是表示21年的21个字符串</span><br><span class="line">    ;84byte</span><br><span class="line"></span><br><span class="line">    dd 16,22,382,1356,2390,8000,16000,24486,50065,97479,140417,197514</span><br><span class="line">    dd 345980,590827,803530,1183000,1843000,2759000,3753000,4649000,5937000</span><br><span class="line">    ;以上是表示21年公司总收入的21个dword型数据，21×4=84byte</span><br><span class="line">    ;84byte</span><br><span class="line"></span><br><span class="line">    dw 3,7,9,13,28,38,130,220,476,778,1001,1442,2258,2793,4037,5635,8226</span><br><span class="line">    dw 11542,14430,15257,17800</span><br><span class="line">    ;以上是表示21年公司雇员人数的21个word数据，21×2byte=42byte</span><br><span class="line">    ;42byte</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">table segment</span><br><span class="line">    db 21 dup(&#x27;year summ ne ?? &#x27;)</span><br><span class="line">table ends</span><br><span class="line"></span><br><span class="line">f_data segment                  ;table中数据处理变ASCII码后放这里，然后通过show_str输出</span><br><span class="line">    db 8 dup(0)             ;最长7个ASCII码+最后一个是0；程序中也单独设为0，这里是(?)也行</span><br><span class="line">f_data ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">start:</span><br><span class="line">      call to_table             ;将data中的数据处理放到table中      ;已测试没问题</span><br><span class="line">      call cls                  ;对DOS清屏                         ;已测试没问题</span><br><span class="line">      </span><br><span class="line">      mov ax,table              ;es:[bx]指向table段</span><br><span class="line">      mov es,ax                 ;bx控制行数,+10h</span><br><span class="line">      mov bx,0                  </span><br><span class="line"></span><br><span class="line">      mov ax,f_data</span><br><span class="line">      mov ds,ax                 ;ds:[si]指向f_data段</span><br><span class="line">      mov si,0                  ;ds:si始终不变，覆盖-&gt;输出-&gt;下一个数据覆盖-&gt;输出</span><br><span class="line">      </span><br><span class="line">      mov dh,4                  ;行号为1，下次循环前+1</span><br><span class="line">                                ;运行后下面会有3行覆盖我的输出，因为DOS最多就28行(0~27)，这里有21行</span><br><span class="line">                                ;dh选&lt;=4(第5行)恰好不被覆盖</span><br><span class="line">      mov cx,21                 ;一共21行</span><br><span class="line">    show_info:</span><br><span class="line">      push cx                   ;保存计数器，因为循环里边用到cl设置字节属性</span><br><span class="line"></span><br><span class="line">      ;处理显示年份数据</span><br><span class="line">      mov ax,es:[bx]            ;处理年份到f_data</span><br><span class="line">      mov [si],ax               ;字符串已经是ASCII码，直接拷贝</span><br><span class="line">      mov ax,es:[bx+2]</span><br><span class="line">      mov [si+2],ax</span><br><span class="line">      mov byte ptr [si+4],0     ;以0作为字符串结尾</span><br><span class="line"></span><br><span class="line">      mov dl,01                  ;设置为1列</span><br><span class="line">      mov cl,07                  ;黑底白字</span><br><span class="line">      call show_str             ;ds:[si]始终段首，前边用的是ds:[si+idata]进行寻址存放</span><br><span class="line">      </span><br><span class="line">      ;处理和显示收入数据</span><br><span class="line">      push dx                   ;为了保存dh，但push是字操作</span><br><span class="line">      </span><br><span class="line">      mov ax,es:[bx+5]          ;(ax)=收入的低16位</span><br><span class="line">      mov dx,es:[bx+7]          ;(dx)=收入的高16位</span><br><span class="line">      call ddtoc                ;处理成ASCII码放到ds:[si]</span><br><span class="line">      </span><br><span class="line">      pop dx                    ;恢复行号</span><br><span class="line">      mov dl,0bh    ;11                 ;设置为11列</span><br><span class="line">      mov cl,07                  ;黑底白字</span><br><span class="line">      call show_str</span><br><span class="line">      </span><br><span class="line">      ;显示公司总人数</span><br><span class="line">      push dx</span><br><span class="line">      </span><br><span class="line">      mov ax,es:[bx+10]         ;公司总人数就2byte</span><br><span class="line">      xor dx,dx                 ;高位补0</span><br><span class="line">      call ddtoc                ;处理成ASCII码放ds:[si]</span><br><span class="line"></span><br><span class="line">      pop dx</span><br><span class="line">      mov dl,18h    ;24                 ;设置为24列</span><br><span class="line">      mov cl,07</span><br><span class="line">      call show_str</span><br><span class="line"></span><br><span class="line">      ;显示人均收入</span><br><span class="line">      push dx</span><br><span class="line">      </span><br><span class="line">      mov ax,es:[bx+0dh]</span><br><span class="line">      xor dx,dx</span><br><span class="line">      call ddtoc</span><br><span class="line"></span><br><span class="line">      pop dx</span><br><span class="line">      mov dl,24h    ;36                 ;设置为36列</span><br><span class="line">      mov cl,07</span><br><span class="line">      call show_str</span><br><span class="line">      </span><br><span class="line">      add bx,10h                ;指向下一行</span><br><span class="line">      inc dh                    ;显示缓冲区行号+1，为下一行</span><br><span class="line"></span><br><span class="line">      pop cx                    ;恢复计数器</span><br><span class="line">      loop show_info</span><br><span class="line"></span><br><span class="line">      mov ax,4c00h</span><br><span class="line">      int 21h</span><br><span class="line">;----------------------------------------------------------------------</span><br><span class="line">    ;名称：to_table </span><br><span class="line">    ;功能：将data中的数据处理放到table中</span><br><span class="line">    ;入口参数：无</span><br><span class="line">    ;返回：无</span><br><span class="line">to_table:</span><br><span class="line">      push ax</span><br><span class="line">      push bx</span><br><span class="line">      push bp</span><br><span class="line">      push cx</span><br><span class="line">      push ds</span><br><span class="line">      push es</span><br><span class="line">      push si</span><br><span class="line"></span><br><span class="line">      mov ax,data</span><br><span class="line">      mov ds,ax                 ;ds指向data</span><br><span class="line">      mov bx,0                  ;ds:[bx+idata]用来指向data段中的年份和收入</span><br><span class="line">      mov si,84+84              ;ds:[si]用来指向data段中的雇员数</span><br><span class="line"></span><br><span class="line">      mov ax,table</span><br><span class="line">      mov es,ax                 ;es指向table</span><br><span class="line">      mov bp,0                  ;es:[bp+idata]</span><br><span class="line"></span><br><span class="line">      mov cx,21</span><br><span class="line">    t_t_s:</span><br><span class="line">      mov ax,[si]               ;复制雇员数量+准备除数（放内存单元）</span><br><span class="line">      mov es:[bp+0ah],ax        ;除数也可以放寄存器，div reg，然后再把商放table里</span><br><span class="line"></span><br><span class="line">      mov ax,[bx]               ;复制年份</span><br><span class="line">      mov dx,[bx+2]             ;[bx+idata]方式寻址,[bx+0]||[bx+2]</span><br><span class="line">      mov es:[bp],ax</span><br><span class="line">      mov es:[bp+2],dx</span><br><span class="line"></span><br><span class="line">      mov ax,[bx+84]            ;复制收入+准备被除数</span><br><span class="line">      mov dx,[bx+84+2]          ;84是从年份数据跳到收入数据，要+84个byte</span><br><span class="line">      mov es:[bp+5h],ax</span><br><span class="line">      mov es:[bp+5h+2],dx</span><br><span class="line"></span><br><span class="line">      div word ptr es:[bp+0ah]  ;商在AX，即人均收入</span><br><span class="line">      mov es:[bp+0dh],ax        ;放人均收入</span><br><span class="line">      </span><br><span class="line">      add bx,4                  ;data中，年份or收入都是4byte，故bx递增量是4</span><br><span class="line">      add si,2                  ;data中公司雇员相邻word类型，即2byte</span><br><span class="line">      add bp,10h                ;table中下一行</span><br><span class="line"></span><br><span class="line">      loop t_t_s</span><br><span class="line">      </span><br><span class="line">      pop si</span><br><span class="line">      pop es</span><br><span class="line">      pop ds</span><br><span class="line">      pop cx</span><br><span class="line">      pop bp</span><br><span class="line">      pop bx</span><br><span class="line">      pop ax</span><br><span class="line"></span><br><span class="line">      ret</span><br><span class="line">;-------------------------------------------------------------</span><br><span class="line">    ;名称：cls</span><br><span class="line">    ;功能：DOS窗口清屏，对80×25彩色字符模式显示缓冲区进行清屏</span><br><span class="line">    ;原理：把内存地址结构B8000H~BFFFFH全写入 ASCII码NULL || 黑底黑字</span><br><span class="line">    ;入口参数：无</span><br><span class="line">    ;返回参数：无</span><br><span class="line">cls:  </span><br><span class="line">        push ax</span><br><span class="line">        push bx</span><br><span class="line">        push cx</span><br><span class="line">        push es</span><br><span class="line"></span><br><span class="line">        mov ax,0b800h          ;显存地址b800h</span><br><span class="line">        mov es,ax</span><br><span class="line">        mov bx,0</span><br><span class="line"></span><br><span class="line">        mov al,0              ;低位设为NULL，ASCII码为0</span><br><span class="line">        mov ah,0              ;字符属性设置为黑底黑字，0 000 0 000</span><br><span class="line"></span><br><span class="line">        mov cx,80*25          ;25行，每行80个字符，循环80*25次</span><br><span class="line">    cls_s:</span><br><span class="line">        mov es:[bx],ax</span><br><span class="line">        add bx,2</span><br><span class="line">        loop cls_s</span><br><span class="line"></span><br><span class="line">        pop es</span><br><span class="line">        pop cx</span><br><span class="line">        pop bx</span><br><span class="line">        pop ax</span><br><span class="line"></span><br><span class="line">        ret</span><br><span class="line">;----------------------------------------------------------------------</span><br><span class="line">    ;名称：show_str</span><br><span class="line">    ;功能：在指定的位置，用指定的颜色，显示一个用0结束的字符串</span><br><span class="line">    ;入口参数  (dh)=行号 (dl)=列号 (cl)=颜色 ds:si指向字符串首地址,字符串要以0结尾</span><br><span class="line">    ;返回：无</span><br><span class="line">show_str: </span><br><span class="line">      push ax           ;只压子程序中用到的寄存器</span><br><span class="line">      push bx</span><br><span class="line">      push cx           ;没必要那么虎，全压了</span><br><span class="line">      push di</span><br><span class="line">      push dx</span><br><span class="line">      push es</span><br><span class="line">      push si</span><br><span class="line"></span><br><span class="line">      mov ax,0b800h     ;段地址</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov bx,0          ;用来放行和列偏移地址</span><br><span class="line">      mov di,0          ;指向显示器缓冲区下一字</span><br><span class="line"></span><br><span class="line">      ;算行偏移地址</span><br><span class="line">      xor ah,ah         ;ax高位清0</span><br><span class="line">      mov al,160        ;0a0h，160乘以行号，算行偏移地址</span><br><span class="line">      mul dh            ;行偏移地址结果在ax中</span><br><span class="line">      </span><br><span class="line">      mov bx,ax         ;结果送给bx</span><br><span class="line"></span><br><span class="line">      ;算列偏移地址</span><br><span class="line">      xor ah,ah         ;或者mov dh,0 然后add bx,dx来两句</span><br><span class="line">      mov al,2</span><br><span class="line">      mul dl            ;列偏移地址结果在ax中</span><br><span class="line">      </span><br><span class="line">      add bx,ax         ;现在bx是行+列偏移地址的和</span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">      mov al,cl         ;下边要用cx来拷贝与判断，cl应放字符ASCII码，高位是字节属性</span><br><span class="line">      mov cl,0          ;而题目要求子程序参数（cl）=颜色，这里用al保存一下</span><br><span class="line">    s_s_s:</span><br><span class="line">      mov cl,ds:[si]    ;取字符串中的字符到cl中</span><br><span class="line">      mov ch,0          ;把高位字节属性清0.那么如果取的字符是0，jcxz就跳转退出子程序</span><br><span class="line">      jcxz ok           ;用到前面学的cx==0就退出子程序</span><br><span class="line">      mov ch,al         ;把字符属性弄回来</span><br><span class="line">                        ;法二，就直接把字拷贝到显示器缓冲区，拷贝完后边在单独写字节属性到缓冲区</span><br><span class="line"></span><br><span class="line">      mov es:[bx+di],cx ;拷贝</span><br><span class="line"></span><br><span class="line">      inc si            ;下一个字符拿来吧你！</span><br><span class="line">      add di,2          ;显示器缓冲区下一列（一个字）</span><br><span class="line"></span><br><span class="line">      jmp short s_s_s</span><br><span class="line">    ok:</span><br><span class="line">      pop si            ;ret前弹栈，与入栈顺序相反</span><br><span class="line">      pop es</span><br><span class="line">      pop dx</span><br><span class="line">      pop di</span><br><span class="line">      pop cx</span><br><span class="line">      pop bx</span><br><span class="line">      pop ax</span><br><span class="line"></span><br><span class="line">      ret</span><br><span class="line">;----------------------------------------------------------------------</span><br><span class="line">    ;名称：ddtoc     </span><br><span class="line">    ;功能：将dword型数据转变为表示十进制数的字符串，字符串以0为结尾符，写入ds:[si]</span><br><span class="line">    ;入口参数：dx||ax       ds:[si]指向字符串串的首地址</span><br><span class="line">    ;(dx)=dword型数据的高16位 (ax)=dword型数据的低16位</span><br><span class="line">    ;返回：无</span><br><span class="line">ddtoc:</span><br><span class="line">        push bx           ;参数保护</span><br><span class="line">        push cx</span><br><span class="line">        push di</span><br><span class="line">        push si</span><br><span class="line"></span><br><span class="line">        mov bx,0          ;bx初始化为0，记录多少位</span><br><span class="line">        mov si,0          ;ds:[si]放结果用</span><br><span class="line">        mov di,0          ;存cx用</span><br><span class="line">    dec_to_ascii:</span><br><span class="line">        mov cx,10         ;除数准备，10</span><br><span class="line">        call divdw        ;子程序调用完返回   商：dx||ax   余数 cx</span><br><span class="line">        </span><br><span class="line">        push dx           ;保护一下结果</span><br><span class="line">        push ax       </span><br><span class="line">        mov di,cx</span><br><span class="line"></span><br><span class="line">        add ax,dx         ;(dx)+(ax)整个商的和</span><br><span class="line">        mov cx,ax </span><br><span class="line"></span><br><span class="line">        pop ax</span><br><span class="line">        pop dx</span><br><span class="line">        jcxz before_ready        ;商为0，表明除完了  否则顺序执行</span><br><span class="line"></span><br><span class="line">        mov cx,di </span><br><span class="line">        add cx,30h        ;余数+30h变ASCII 码</span><br><span class="line">        push cx           ;先存着，÷10余数0~9，实际上只有cl有数值，只用到cl，ch为0</span><br><span class="line">        </span><br><span class="line">        inc bx            ;记录压了多少次</span><br><span class="line">        </span><br><span class="line">        jmp short dec_to_ascii</span><br><span class="line">    before_ready: </span><br><span class="line">        ;最高位也要处理</span><br><span class="line">        mov cx,di</span><br><span class="line">        add cx,30h</span><br><span class="line">        push cx</span><br><span class="line">        inc bx</span><br><span class="line"></span><br><span class="line">        mov cx,bx         ;给循环次数</span><br><span class="line">    put_in_data:          ;放data段中</span><br><span class="line">        pop bx</span><br><span class="line">        mov [si],bl</span><br><span class="line">        inc si</span><br><span class="line">        loop put_in_data</span><br><span class="line"></span><br><span class="line">        mov byte ptr [si],0;字符串0结尾</span><br><span class="line">    </span><br><span class="line">        pop si            ;参数恢复</span><br><span class="line">        pop di</span><br><span class="line">        pop cx</span><br><span class="line">        pop bx</span><br><span class="line">        ret</span><br><span class="line">;----------------------------------------------------------------------</span><br><span class="line">    ;名称：divdw</span><br><span class="line">    ;功能：进行不会产生溢出的除法运算，被除数为dword型(32位），除数为word型（16位），结果为dword型（32位）</span><br><span class="line">    ;参数  被除数 dx||ax  除数 cx</span><br><span class="line">    ;(ax)=dword型数据的低16位，(dx)=dword型数据的高16位  (cx)=除数</span><br><span class="line">    ;返回参数  商：dx||ax   余数 cx</span><br><span class="line">    ;(dx)=商的高16位，(ax)=商的低16位  (cx)=余数</span><br><span class="line">divdw:</span><br><span class="line">      push bx           ;参数保护</span><br><span class="line"></span><br><span class="line">      mov bx,ax         ;保存被除数低16位</span><br><span class="line">      ;作H/N  H:被除数高16位 N：除数</span><br><span class="line">      mov ax,dx       </span><br><span class="line">      xor dx,dx         ;被除数准备：dx||ax，dx清0，把传进来的被除数的高16位dx放到ax中</span><br><span class="line">      div cx            ;H/N结果的商在AX中，余数在DX中</span><br><span class="line"></span><br><span class="line">      push ax           ;保存int(H/N)，即被除数高16位/除数的商</span><br><span class="line">      </span><br><span class="line">      mov ax,bx         ;恢复ax为传进来时的值，被除数的低16位</span><br><span class="line">      div cx            ;DX||AX  div  cx，即rem(H/N)||L /除数N</span><br><span class="line">                        ;商在AX（出口参数商低16位已在此），余数在DX</span><br><span class="line">      </span><br><span class="line">      mov cx,dx         ;出口参数，cx是余数</span><br><span class="line">      pop dx            ;dx是商的高16位</span><br><span class="line"></span><br><span class="line">      pop bx            ;参数恢复</span><br><span class="line">      </span><br><span class="line">      ret</span><br><span class="line">;----------------------------------------------------------------------</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="P234实验11：Exp11-asm">P234实验11：Exp11.asm</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">assume cs:codesg</span><br><span class="line"></span><br><span class="line">datasg segment</span><br><span class="line">    db &quot;Beginner&#x27;s All-purpose Symbolic Instruction Code.&quot;,0</span><br><span class="line">datasg ends</span><br><span class="line"></span><br><span class="line">codesg segment</span><br><span class="line">begin:</span><br><span class="line">      mov ax,datasg</span><br><span class="line">      mov ds,ax</span><br><span class="line">      mov si,0</span><br><span class="line">      call letterc</span><br><span class="line"></span><br><span class="line">      mov ax,4c00h</span><br><span class="line">      int 21h</span><br><span class="line">letterc:</span><br><span class="line">    s:</span><br><span class="line">      mov ch,0</span><br><span class="line">      mov cl,[si]</span><br><span class="line">      jcxz finish           ;是否是0，是0就退出啦</span><br><span class="line">      cmp cl,61h            ;小写a的ASCII码为61h</span><br><span class="line">      jna  s0               ;不高于61h</span><br><span class="line">      cmp cl,&#x27;z&#x27;            ;这样也行，不去算ASCII码</span><br><span class="line">      jnb s0                 ;不低于&#x27;z&#x27;</span><br><span class="line">      sub cl,20h            ;减20h变大写字母</span><br><span class="line">      mov [si],cl</span><br><span class="line">    s0:</span><br><span class="line">      inc si</span><br><span class="line">      jmp short s</span><br><span class="line">    finish:  </span><br><span class="line">      ret</span><br><span class="line">codesg ends</span><br><span class="line">end begin</span><br></pre></td></tr></table></figure>
<h2 id="P251实验12：Exp12-asm">P251实验12：Exp12.asm</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">start:</span><br><span class="line">      ;do0安装程序</span><br><span class="line">      mov ax,cs</span><br><span class="line">      mov ds,ax</span><br><span class="line">      mov si,offset do0                 ;ds:[si]指向do0程序源地址</span><br><span class="line"></span><br><span class="line">      mov ax,0</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov di,200h                       ;指向do0程序存放的目的地址</span><br><span class="line"></span><br><span class="line">      mov cx,offset do0end-offset do0   ;do0程序长度</span><br><span class="line">      cld                               ;clean df正向传输</span><br><span class="line">      rep movsb</span><br><span class="line"></span><br><span class="line">      ;设置中断向量表中0号中断的地址</span><br><span class="line">      mov ax,0</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov word ptr es:[0*4],200h        ;低位是偏移地址IP</span><br><span class="line">      mov word ptr es:[0*4+2],0         ;高位是段地址CS</span><br><span class="line">      </span><br><span class="line">      ;测试程序 16位/8位结果商放AL，AL8位最大255，放不下1000h</span><br><span class="line">      mov ax,1000h</span><br><span class="line">      mov bh,1</span><br><span class="line">      div bh</span><br><span class="line"></span><br><span class="line">      mov ax,4c00h</span><br><span class="line">      int 21h</span><br><span class="line"></span><br><span class="line">    do0:</span><br><span class="line">      jmp short do0start                ;0:200处，且这条指令占两字节</span><br><span class="line">      db &quot;divide error!&quot;                     ;∴字符串偏移地址为202h</span><br><span class="line">    do0start:</span><br><span class="line">      mov ax,cs</span><br><span class="line">      mov ds,ax</span><br><span class="line">      mov si,202h                       ;ds:[si]指向字符串</span><br><span class="line"></span><br><span class="line">      mov ax,0b800h</span><br><span class="line">      mov es,ax                         ;es:[di]指向显存缓冲区</span><br><span class="line">      mov di,12*160+36*2                ;12行36列开始显示   行号(0~24)列号(0~79)</span><br><span class="line"></span><br><span class="line">      mov cx,13                          ;字符串长度</span><br><span class="line">    s:</span><br><span class="line">      mov al,[si]</span><br><span class="line">      mov es:[di],al</span><br><span class="line">      mov ah,2h                          ;黑底绿字</span><br><span class="line">      mov es:[di+1],ah</span><br><span class="line"></span><br><span class="line">      inc si                            ;字符串下一个字符</span><br><span class="line">      add di,2                          ;显存空间下一个字</span><br><span class="line">      loop s</span><br><span class="line"></span><br><span class="line">      mov ax,4c00h</span><br><span class="line">      int 21h</span><br><span class="line">    do0end:</span><br><span class="line">      nop</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="P258检测点13-1：jcd13-1-asm">P258检测点13.1：jcd13_1.asm</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">data segment</span><br><span class="line">    db &#x27;conversation&#x27;,0</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">start:</span><br><span class="line">      ;----------安装程序-----------</span><br><span class="line">      mov ax,cs</span><br><span class="line">      mov ds,ax</span><br><span class="line">      mov si,offset lp          ;ds:[di]指向7ch中断程序</span><br><span class="line"></span><br><span class="line">      mov ax,0</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov di,200h               ;es:[di]指向目的地址</span><br><span class="line"></span><br><span class="line">      mov cx,offset lpend-lp</span><br><span class="line">      cld</span><br><span class="line">      rep movsb</span><br><span class="line">      </span><br><span class="line">      ;--------修改中断向量表中-----</span><br><span class="line">      mov ax,0</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov word ptr es:[7ch*4],200h</span><br><span class="line">      mov word ptr es:[7ch*4+2],0</span><br><span class="line"></span><br><span class="line">      ;---------主程序-----------</span><br><span class="line">      mov ax,data</span><br><span class="line">      mov ds,ax</span><br><span class="line">      mov si,0                  ;ds:[si]指向data中的字符串</span><br><span class="line"></span><br><span class="line">      mov ax,0b800h             ;es:[di]指向显示器缓冲区</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov di,12*160</span><br><span class="line">    </span><br><span class="line">    s:cmp byte ptr [si],0</span><br><span class="line">      je ok</span><br><span class="line">      mov al,[si]</span><br><span class="line">      mov ah,2                 ;黑底绿字</span><br><span class="line">      mov es:[di],ax</span><br><span class="line">      inc si                    ;下一个字符</span><br><span class="line">      add di,2</span><br><span class="line">      mov bx,offset s-offset ok</span><br><span class="line">      int 7ch</span><br><span class="line">   ok:</span><br><span class="line">      mov ax,4c00h</span><br><span class="line">      int 21h</span><br><span class="line"></span><br><span class="line">      ;---------7ch中断程序-------</span><br><span class="line">   lp:push bp</span><br><span class="line">      mov bp,sp</span><br><span class="line">      add [bp+2],bx</span><br><span class="line">   lpret:                        ;这个标号其实没啥用，只是让程序逻辑更清晰</span><br><span class="line">      pop bp</span><br><span class="line">      iret</span><br><span class="line">   lpend:</span><br><span class="line">      nop</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="P262实验十三">P262实验十三</h2>
<h3 id="1-Exp13-1-asm">(1)Exp13_1.asm</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">data segment</span><br><span class="line">    db &#x27;welcome to masm!&#x27;,0</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">start:</span><br><span class="line">      ;----------安装程序-----------</span><br><span class="line">      mov ax,cs</span><br><span class="line">      mov ds,ax</span><br><span class="line">      mov si,offset begin          ;ds:[di]指向7ch中断程序</span><br><span class="line"></span><br><span class="line">      mov ax,0</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov di,200h               ;es:[di]指向目的地址</span><br><span class="line"></span><br><span class="line">      mov cx,offset lpend-offset begin</span><br><span class="line">      cld</span><br><span class="line">      rep movsb</span><br><span class="line">      </span><br><span class="line">      ;--------修改中断向量表中-----</span><br><span class="line">      mov ax,0</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov word ptr es:[7ch*4],200h</span><br><span class="line">      mov word ptr es:[7ch*4+2],0</span><br><span class="line"></span><br><span class="line">      ;---------主程序-----------</span><br><span class="line">      mov dh,10                 ;11行</span><br><span class="line">      mov dl,10                 ;11列</span><br><span class="line">      mov cl,2                  ;黑底绿字</span><br><span class="line"></span><br><span class="line">      mov ax,data</span><br><span class="line">      mov ds,ax</span><br><span class="line">      mov si,0                  ;ds:[si]指向data中的字符串</span><br><span class="line"></span><br><span class="line">      int 7ch</span><br><span class="line">   </span><br><span class="line">      mov ax,4c00h</span><br><span class="line">      int 21h</span><br><span class="line"></span><br><span class="line">      ;---------7ch中断程序-------</span><br><span class="line">      ;功能：显示一个用0结束的字符串</span><br><span class="line">      ;参数：(dh)=行号(dl)=列号(cl)=颜色，ds:si指向字符串首地址</span><br><span class="line">   begin:</span><br><span class="line">      push bx           ;参数保护</span><br><span class="line">      push cx</span><br><span class="line">      push dx</span><br><span class="line">      push si</span><br><span class="line"></span><br><span class="line">      mov ax,0b800h</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov bx,0          ;用来放行和列偏移地址</span><br><span class="line">      mov di,0          ;指向显示器缓冲区下一字</span><br><span class="line"></span><br><span class="line">      ;算行偏移地址</span><br><span class="line">      xor ah,ah         ;ax高位清0</span><br><span class="line">      mov al,160        ;0a0h，160乘以行号，算行偏移地址</span><br><span class="line">      mul dh            ;行偏移地址结果在ax中</span><br><span class="line">      </span><br><span class="line">      mov bx,ax         ;结果送给bx</span><br><span class="line"></span><br><span class="line">      ;算列偏移地址</span><br><span class="line">      xor ah,ah         ;或者mov dh,0 然后add bx,dx来两句</span><br><span class="line">      mov al,2</span><br><span class="line">      mul dl            ;列偏移地址结果在ax中</span><br><span class="line">      </span><br><span class="line">      add bx,ax         ;现在bx是行+列偏移地址的和</span><br><span class="line">      </span><br><span class="line">      mov al,cl         ;下边要用cx来拷贝与判断，cl应放字符ASCII码，高位是字节属性</span><br><span class="line">      mov cl,0          ;而题目要求子程序参数（cl）=颜色，这里用al保存一下</span><br><span class="line">    s:</span><br><span class="line">      mov cl,ds:[si]    ;取字符串中的字符到cl中</span><br><span class="line">      mov ch,0          ;把高位字节属性清0.那么如果取的字符是0，jcxz就跳转退出子程序</span><br><span class="line">      jcxz last           ;用到前面学的cx==0就退出子程序</span><br><span class="line">      mov ch,al         ;把字符属性弄回来</span><br><span class="line">                        ;法二，就直接把字拷贝到显示器缓冲区，拷贝完后边在单独写字节属性到缓冲区</span><br><span class="line"></span><br><span class="line">      mov es:[bx+di],cx ;拷贝</span><br><span class="line"></span><br><span class="line">      inc si            ;下一个字符拿来吧你！</span><br><span class="line">      add di,2          ;显示器缓冲区下一列（一个字）</span><br><span class="line"></span><br><span class="line">      jmp short s</span><br><span class="line">      </span><br><span class="line">    last:  </span><br><span class="line">      pop si            ;参数恢复</span><br><span class="line">      pop dx</span><br><span class="line">      pop cx</span><br><span class="line">      pop bx</span><br><span class="line"></span><br><span class="line">      iret</span><br><span class="line">   lpend:</span><br><span class="line">      nop</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h3 id="2-Exp13-2-asm">(2)Exp13_2.asm</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">start:</span><br><span class="line">      ;----------安装程序-----------</span><br><span class="line">      mov ax,cs</span><br><span class="line">      mov ds,ax</span><br><span class="line">      mov si,offset lp          ;ds:[di]指向7ch中断程序</span><br><span class="line"></span><br><span class="line">      mov ax,0</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov di,200h               ;es:[di]指向目的地址</span><br><span class="line"></span><br><span class="line">      mov cx,offset lpend-offset lp</span><br><span class="line">      cld</span><br><span class="line">      rep movsb</span><br><span class="line">      </span><br><span class="line">      ;--------修改中断向量表-----</span><br><span class="line">      mov ax,0</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov word ptr es:[7ch*4],200h</span><br><span class="line">      mov word ptr es:[7ch*4+2],0</span><br><span class="line"></span><br><span class="line">      ;---------主程序-----------</span><br><span class="line">      mov ax,0b800h</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov di,160*12</span><br><span class="line">      mov bx,offset s-offset se</span><br><span class="line">      mov cx,80</span><br><span class="line">    s:</span><br><span class="line">      mov byte ptr es:[di],&#x27;!&#x27;      ;B800:0780处本身就是20 07 20 07...字节属性是07h，黑底白字</span><br><span class="line">      add di,2</span><br><span class="line">      </span><br><span class="line">      int 7ch</span><br><span class="line">   se:nop</span><br><span class="line"></span><br><span class="line">      mov ax,4c00h</span><br><span class="line">      int 21h</span><br><span class="line"></span><br><span class="line">      ;---------7ch中断程序-------</span><br><span class="line">      ;功能：完成loop指令的功能</span><br><span class="line">      ;参数：(cx)=循环次数，(bx)=位移</span><br><span class="line">   lp:</span><br><span class="line">      push bp</span><br><span class="line">      mov bp,sp</span><br><span class="line">      dec cx</span><br><span class="line">      jcxz lpret</span><br><span class="line">      add [bp+2],bx</span><br><span class="line">  lpret:</span><br><span class="line">      pop bp</span><br><span class="line">      iret</span><br><span class="line">   lpend:</span><br><span class="line">      nop</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h3 id="3-Exp13-3-asm">(3)Exp13_3.asm</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">    s1: db &#x27;Good,better,best,&#x27;,&#x27;$&#x27;</span><br><span class="line">    s2: db &#x27;Never let it rest,&#x27;,&#x27;$&#x27;</span><br><span class="line">    s3: db &#x27;Till good is better,&#x27;,&#x27;$&#x27;</span><br><span class="line">    s4: db &#x27;And better,best.&#x27;,&#x27;$&#x27;</span><br><span class="line">    s : dw offset s1,offset s2,offset s3,offset s4</span><br><span class="line">   row: db 2,4,6,8</span><br><span class="line"></span><br><span class="line">   start:</span><br><span class="line">         mov ax,cs</span><br><span class="line">         mov ds,ax</span><br><span class="line">         mov bx,offset s</span><br><span class="line">         mov si,offset row</span><br><span class="line">         mov cx,4</span><br><span class="line">      ok:mov bh,0</span><br><span class="line">         mov dh,[si]</span><br><span class="line">         mov dl,0</span><br><span class="line">         mov ah,2</span><br><span class="line">         int 10h</span><br><span class="line"></span><br><span class="line">         mov dx,[bx]</span><br><span class="line">         mov ah,9</span><br><span class="line">         int 21h</span><br><span class="line">         inc si</span><br><span class="line">         add bx,2</span><br><span class="line">         loop ok</span><br><span class="line"></span><br><span class="line">         mov ax,4c00h</span><br><span class="line">         int 21h</span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="P271实验14Exp14-asm">P271实验14Exp14.asm</h2>
<h3 id="1）输出法一：使用21号中断例程9号子程序显示-前的字符串">(1）输出法一：使用21号中断例程9号子程序显示$前的字符串</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">assume cs:codesg</span><br><span class="line"></span><br><span class="line">data segment</span><br><span class="line">          db &#x27;yy/MM/dd hh:mm:ss&#x27;,&#x27;$&#x27;  ; 用于存放从CMOS RAM中读取的时间ASCII</span><br><span class="line">   index: db 9,8,7,4,2,0            ; 用于存放CMOS RAM中对应的日期存储单元地址</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">codesg segment</span><br><span class="line">   start: mov ax,data</span><br><span class="line">          mov ds,ax</span><br><span class="line">          mov si,0              ;ds:[si]指向存放的数据段</span><br><span class="line">          mov di,offset index   ;ds:[di]指向索引号</span><br><span class="line"> </span><br><span class="line">          mov cx,6              ;循环6次，读6个数据</span><br><span class="line">       s: push cx               ;循环里边shl左移用到cl作为次数</span><br><span class="line"></span><br><span class="line">          mov al,[di]</span><br><span class="line">          out 70h,al            ;向地址端口70h写入要访问的单元的地址</span><br><span class="line">          in al,71h             ;将CMOS RAM中的存储的信息读入al中</span><br><span class="line"></span><br><span class="line">          mov ah,al</span><br><span class="line">          mov cl,4</span><br><span class="line">          shr ah,cl             ;al中高4位BCD码写入ah</span><br><span class="line">          and al,00001111B      ;al高4位清0，留低4位的BCD码</span><br><span class="line"></span><br><span class="line">          add ah,30h            ;+30h变ASCII码</span><br><span class="line">          add al,30h            </span><br><span class="line"></span><br><span class="line">          mov [si],ah           ;存到data段中</span><br><span class="line">          mov [si+1],al</span><br><span class="line"></span><br><span class="line">          inc di                ;取下一个索引号</span><br><span class="line">          add si,3              </span><br><span class="line"></span><br><span class="line">          pop cx              ;恢复计数器cx</span><br><span class="line">          loop s             ; 循环的作用就是将得到的数据保存在time数据段中</span><br><span class="line">;--------显示输出部分-------------</span><br><span class="line">          mov ah,2              ;置光标</span><br><span class="line">          mov bh,0</span><br><span class="line">          mov dh,5              ;行号</span><br><span class="line">          mov dl,12             ;列号</span><br><span class="line">          int 10h</span><br><span class="line"></span><br><span class="line">          mov dx,0</span><br><span class="line">          mov ah,9</span><br><span class="line">          int 21h</span><br><span class="line"></span><br><span class="line">    comp: mov ax,4c00h</span><br><span class="line">          int 21h</span><br><span class="line">codesg ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h3 id="2）输出法二：手动往0b80h-xxxx处写">(2）输出法二：手动往0b80h:xxxx处写</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">assume cs:codesg</span><br><span class="line"></span><br><span class="line">data segment</span><br><span class="line">          db &#x27;yy/MM/dd hh:mm:ss&#x27;,0  ; 用于存放从CMOS RAM中读取的时间ASCII</span><br><span class="line">   index: db 9,8,7,4,2,0            ; 用于存放CMOS RAM中对应的日期存储单元地址</span><br><span class="line">data ends</span><br><span class="line"></span><br><span class="line">codesg segment</span><br><span class="line">   start: mov ax,data</span><br><span class="line">          mov ds,ax</span><br><span class="line">          mov si,0              ;ds:[si]指向存放的数据段</span><br><span class="line">          mov di,offset index   ;ds:[di]指向索引号</span><br><span class="line"> </span><br><span class="line">          mov cx,6              ;循环6次，读6个数据</span><br><span class="line">       s: push cx               ;循环里边shl左移用到cl作为次数</span><br><span class="line"></span><br><span class="line">          mov al,[di]</span><br><span class="line">          out 70h,al            ;向地址端口70h写入要访问的单元的地址</span><br><span class="line">          in al,71h             ;将CMOS RAM中的存储的信息读入al中</span><br><span class="line"></span><br><span class="line">          mov ah,al</span><br><span class="line">          mov cl,4</span><br><span class="line">          shr ah,cl             ;al中高4位BCD码写入ah</span><br><span class="line">          and al,00001111B      ;al高4位清0，留低4位的BCD码</span><br><span class="line"></span><br><span class="line">          add ah,30h            ;+30h变ASCII码</span><br><span class="line">          add al,30h            </span><br><span class="line"></span><br><span class="line">          mov [si],ah           ;存到data段中</span><br><span class="line">          mov [si+1],al</span><br><span class="line"></span><br><span class="line">          inc di                ;取下一个索引号</span><br><span class="line">          add si,3              </span><br><span class="line"></span><br><span class="line">          pop cx              ;恢复计数器cx</span><br><span class="line">          loop s             ; 循环的作用就是将得到的数据保存在time数据段中</span><br><span class="line">;--------显示输出部分-------------</span><br><span class="line">          mov ax,0B800H</span><br><span class="line">          mov es,ax</span><br><span class="line">          mov bx,160*12+31*2 ; 显示时间的位置，在12行，31列处开始</span><br><span class="line"></span><br><span class="line">          mov di,0</span><br><span class="line">    show: mov cl,[di]</span><br><span class="line">          cmp cl,0                      ;是否到结尾</span><br><span class="line">          je comp</span><br><span class="line">          mov ch,2                      ;字节属性2</span><br><span class="line">          mov es:[bx],cx</span><br><span class="line"></span><br><span class="line">          inc di                        ;下一个字符</span><br><span class="line">          add bx,2                      ;显示缓冲区下一个字</span><br><span class="line">          jmp short show</span><br><span class="line"></span><br><span class="line">    comp: mov ax,4c00h</span><br><span class="line">          int 21h</span><br><span class="line">codesg ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
<h2 id="P285实验15Exp15-asm">P285实验15Exp15.asm</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">assume cs:code</span><br><span class="line"></span><br><span class="line">stack segment</span><br><span class="line">    db 128 dup (0)</span><br><span class="line">stack ends</span><br><span class="line"></span><br><span class="line">code segment</span><br><span class="line">start:</span><br><span class="line">      mov ax,stack          ;堆栈段初始化ss:sp</span><br><span class="line">      mov ss,ax</span><br><span class="line">      mov sp,128</span><br><span class="line"></span><br><span class="line">      push cs               ;可以使用栈，这样赋值</span><br><span class="line">      pop ds                ;设置ds指向cs段</span><br><span class="line">      mov si,offset int9    ;ds:[si]指向自己写的中断例程int 9地址</span><br><span class="line"></span><br><span class="line">      mov ax,0              ;es:[di]指向0:204处，即新int 9中断例程的安装地址</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov di,204h           </span><br><span class="line"></span><br><span class="line">      mov cx,offset int9end-offset int9     ;传输长度</span><br><span class="line">      cld                   ;正向传输</span><br><span class="line">      rep movsb</span><br><span class="line"></span><br><span class="line">      push es:[9*4]         ;将原int 9中断例程的入口地址保存在0:200处</span><br><span class="line">      pop es:[200h]</span><br><span class="line">      push es:[9*4+2]</span><br><span class="line">      pop es:[202h]</span><br><span class="line"></span><br><span class="line">      cli                           ;修改中断向量表为新的入口地址</span><br><span class="line">      mov word ptr es:[9*4],204h</span><br><span class="line">      mov word ptr es:[9*4+2],0</span><br><span class="line">      sti</span><br><span class="line"></span><br><span class="line">      mov ax,4c00h</span><br><span class="line">      int 21h</span><br><span class="line"></span><br><span class="line">int9: push ax</span><br><span class="line">      push bx</span><br><span class="line">      push cx</span><br><span class="line">      push es</span><br><span class="line"></span><br><span class="line">      in al,60h                 </span><br><span class="line"></span><br><span class="line">      pushf</span><br><span class="line">      call dword ptr cs:[200h]       ;调用原int 9中断例程</span><br><span class="line"></span><br><span class="line">      cmp al,1eh+80h                ;A键的断码=通码1e+80h</span><br><span class="line">      jne int9ret                   ;不是A键松开则正常转移</span><br><span class="line"></span><br><span class="line">      mov ax,0b800h                 ;把显示缓冲区所有字节属性+1，更改颜色</span><br><span class="line">      mov es,ax</span><br><span class="line">      mov bx,0</span><br><span class="line">      mov cx,2000                   ;80列*25行共2000个字符</span><br><span class="line">    s:mov byte ptr es:[bx],&#x27;A&#x27;</span><br><span class="line">      add bx,2</span><br><span class="line">      loop s</span><br><span class="line"></span><br><span class="line">int9ret:</span><br><span class="line">      pop es</span><br><span class="line">      pop cx</span><br><span class="line">      pop bx</span><br><span class="line">      pop ax</span><br><span class="line">      iret</span><br><span class="line">int9end:nop</span><br><span class="line"></span><br><span class="line">code ends</span><br><span class="line">end start</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>《汇编语言-王爽-4th》实验代码</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://jyxyz.github.io/posts/77a52927.html">https://jyxyz.github.io/posts/77a52927.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a" style="display: inline-block;width: 120px"><h>博主✍</h><div class="post-copyright-cc-info"><h>阿耶</h></div></div><div class="post-copyright-c" style="display: inline-block;width: 120px"><h>本篇发布于📚</h><div class="post-copyright-cc-info"><h>2021-08-06</h></div></div><div class="post-copyright-u" style="display: inline-block;width: 120px"><h>本篇更新于🕝</h><div class="post-copyright-cc-info"><h>2021-08-18</h></div></div><div class="post-copyright-c" style="display: inline-block;width: 120px"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY 4.0" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/asm/">asm</a></div><div class="post_share"><div class="social-share" data-image="/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq,qzone"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 要饭码</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/reward/wechat.png" target="_blank"><img class="post-qr-code-img" src="/img/reward/wechat.png" alt="wechat饿饿"/></a><div class="post-qr-code-desc">wechat饿饿</div></li><li class="reward-item"><a href="/img/reward/alipay.png" target="_blank"><img class="post-qr-code-img" src="/img/reward/alipay.png" alt="alipay饿饿"/></a><div class="post-qr-code-desc">alipay饿饿</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/7c96f25c.html"><img class="prev-cover" src="/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">《Windows api开发详解》-源码学习</div></div></a></div><div class="next-post pull-right"><a href="/posts/6a024e36.html"><img class="next-cover" src="/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">《windows程序设计5th（珍藏版）》-前四章笔记-小甲鱼</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#P173%E5%AE%9E%E9%AA%8C7%EF%BC%9AExp7-asm"><span class="toc-number">1.</span> <span class="toc-text">P173实验7：Exp7.asm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P187%E5%AE%9E%E9%AA%8C%E4%B9%9D%EF%BC%9AExp9-asm"><span class="toc-number">2.</span> <span class="toc-text">P187实验九：Exp9.asm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P206%E5%AE%9E%E9%AA%8C%E5%8D%81"><span class="toc-number">3.</span> <span class="toc-text">P206实验十</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%98%BE%E7%A4%BA%E5%AD%97%E7%AC%A6%E4%B8%B2Exp10-1-asm"><span class="toc-number">3.1.</span> <span class="toc-text">1.显示字符串Exp10_1.asm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%A7%A3%E5%86%B3%E9%99%A4%E6%B3%95%E6%BA%A2%E5%87%BA%E7%9A%84%E9%97%AE%E9%A2%98Exp10-2-asm"><span class="toc-number">3.2.</span> <span class="toc-text">2.解决除法溢出的问题Exp10_2.asm</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%95%B0%E5%80%BC%E6%98%BE%E7%A4%BAExp10-3-asm"><span class="toc-number">4.</span> <span class="toc-text">3.数值显示Exp10_3.asm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P211%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A11Design-one-asm"><span class="toc-number">5.</span> <span class="toc-text">P211课程设计1Design_one.asm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P234%E5%AE%9E%E9%AA%8C11%EF%BC%9AExp11-asm"><span class="toc-number">6.</span> <span class="toc-text">P234实验11：Exp11.asm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P251%E5%AE%9E%E9%AA%8C12%EF%BC%9AExp12-asm"><span class="toc-number">7.</span> <span class="toc-text">P251实验12：Exp12.asm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P258%E6%A3%80%E6%B5%8B%E7%82%B913-1%EF%BC%9Ajcd13-1-asm"><span class="toc-number">8.</span> <span class="toc-text">P258检测点13.1：jcd13_1.asm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P262%E5%AE%9E%E9%AA%8C%E5%8D%81%E4%B8%89"><span class="toc-number">9.</span> <span class="toc-text">P262实验十三</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Exp13-1-asm"><span class="toc-number">9.1.</span> <span class="toc-text">(1)Exp13_1.asm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Exp13-2-asm"><span class="toc-number">9.2.</span> <span class="toc-text">(2)Exp13_2.asm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Exp13-3-asm"><span class="toc-number">9.3.</span> <span class="toc-text">(3)Exp13_3.asm</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P271%E5%AE%9E%E9%AA%8C14Exp14-asm"><span class="toc-number">10.</span> <span class="toc-text">P271实验14Exp14.asm</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%EF%BC%89%E8%BE%93%E5%87%BA%E6%B3%95%E4%B8%80%EF%BC%9A%E4%BD%BF%E7%94%A821%E5%8F%B7%E4%B8%AD%E6%96%AD%E4%BE%8B%E7%A8%8B9%E5%8F%B7%E5%AD%90%E7%A8%8B%E5%BA%8F%E6%98%BE%E7%A4%BA-%E5%89%8D%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">10.1.</span> <span class="toc-text">(1）输出法一：使用21号中断例程9号子程序显示$前的字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%EF%BC%89%E8%BE%93%E5%87%BA%E6%B3%95%E4%BA%8C%EF%BC%9A%E6%89%8B%E5%8A%A8%E5%BE%800b80h-xxxx%E5%A4%84%E5%86%99"><span class="toc-number">10.2.</span> <span class="toc-text">(2）输出法二：手动往0b80h:xxxx处写</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#P285%E5%AE%9E%E9%AA%8C15Exp15-asm"><span class="toc-number">11.</span> <span class="toc-text">P285实验15Exp15.asm</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'acloudenv-3gdr1re432b1f469',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.vemoji)'))
      }
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'acloudenv-3gdr1re432b1f469',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      document.getElementById('twikoo-count').innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>